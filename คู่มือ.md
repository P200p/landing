# คู่มือการใช้งาน SharkCredit (อัปเดต 2025-07-12)

---

## ฝั่งผู้ใช้ (User)

| ฟังก์ชัน/คำสั่ง         | ใช้ได้ |              คำอธิบาย |
|----------------------|:--------------:|-----------|
| **1. เช็คยอดค้าง**   | ✅    | `/ยอดค้าง` หรือ `!ยอดค้าง` ชื่อและยอดค้างชำระของทุก user ที่ยังไม่คืน (แสดงเฉพาะคนที่มีหนี้ค้าง)
| **2. เช็คประวัติหนี้ตัวเอง**| ✅  | `/ประวัติ` หรือ `!ประวัติ` ดูประวัติการกู้/คืน/ดอกเบี้ยของตัวเองทั้งหมด
| **3. ขอชำระหนี้**   | ✅    | กดปุ่ม "ขอชำระหนี้" ใต้แชท (เฉพาะคนที่มีหนี้ค้าง) เพื่อแจ้งขอปิดหนี้ รอแอดมินกดยืนยัน
| **4. ใช้ AI**                | ✅    | `!ai @ai` หรือ `/ai` ถาม-ตอบกับ AI (together AI) เลขาสุดแซบ สายปั่น ตอบสั้น แต่ซี๊ด 

**หมายเหตุ:**
- ไม่สามารถขอกู้เอง/กดปุ่มขอกู้ได้ ต้องรอแอดมินปล่อยกู้เท่านั้น
- หากมีหนี้ค้างจะไม่สามารถกดปุ่มขอกู้ในรอบถัดไปได้

---

## ฝั่งแอดมิน (Admin)

| ฟังก์ชัน/คำสั่ง         | ใช้ได้ | คำอธิบาย |
|----------------------|:-----:|-----------|
| **1. ปล่อยกู้ (โอนเครดิต)** | ✅    | `/ปล่อยกู้ <จำนวน>` หรือปุ่ม "โอนเครดิต" ระบุจำนวนเงิน ระบบจะสร้างปุ่ม "ขอกู้เงิน" ให้ user กด ใครกดก่อนรับสิทธิ์ทันที
| **2. ยืนยันชำระหนี้**       | ✅    | กดปุ่ม "อนุมัติชำระหนี้" เมื่อ user ขอชำระ ระบบจะบันทึกว่าหนี้ถูกปิดแล้ว
| **3. ดูประวัติธุรกรรม**     | ✅    | `/ธุรกรรม` หรือ `!ธุรกรรม` ดูประวัติการกู้-คืน-ดอกเบี้ยของทุก user
| **4. ประกาศปล่อยกู้**       | ✅    | `/ประกาศปล่อยกู้ <จำนวน>` ส่งข้อความประกาศปล่อยกู้พร้อมปุ่มในแชท

**เงื่อนไขและ logic:**
- ทุกครั้งที่ปล่อยกู้ (โอนเครดิต) จะบันทึกเป็น "การกู้" ของ user นั้น
- ระบบคิดดอกเบี้ย 10% ต่อชั่วโมง (คำนวณและอัปเดตอัตโนมัติ)
- ไม่มีวงเงินจำกัด (user กู้เท่าไหร่ก็ได้ถ้าไม่มีหนี้ค้าง)
- user ที่มีหนี้ค้างจะไม่สามารถกดขอกู้ซ้ำได้

---

## ตัวอย่างการใช้งาน

### User
- `/ยอดค้าง` — ดูรายชื่อและยอดค้างของทุกคน
- `/ประวัติ` — ดูประวัติหนี้ตัวเอง
- กด "ขอชำระหนี้" — แจ้งขอปิดหนี้ รอแอดมินกดยืนยัน
- `/ai` หรือ `!ai @ai` — ถาม-ตอบกับ AI

### Admin
- `/ปล่อยกู้ 100` — ปล่อยกู้ 100 เครดิต สร้างปุ่มให้ user กดรับสิทธิ์
- `/ธุรกรรม` — ดูประวัติธุรกรรมทั้งหมด
- กด "อนุมัติชำระหนี้" — ยืนยันปิดหนี้ให้ user
- `/ประกาศปล่อยกู้ 200` — ประกาศปล่อยกู้ 200 เครดิต

---

## หมายเหตุสำคัญ
- เฉพาะแอดมิน (ADMIN_USER_IDS) เท่านั้นที่มีปุ่ม/command เกี่ยวกับเครดิตและอนุมัติธุรกรรม
- ระบบคิดดอกเบี้ย 10% ทุกชั่วโมงโดยอัตโนมัติ
- ไม่มีวงเงินจำกัด
- user ไม่มีสิทธิ์ขอกู้เอง (ต้องรอแอดมินปล่อยกู้)
- ข้อมูลธุรกรรมและประวัติสามารถดูย้อนหลังได้
- ฟีเจอร์ AI: user ใช้ได้แค่ `/ai` หรือ `!ai @ai` เท่านั้น

---

- **คนแรกที่กดปุ่ม** จะได้รับสิทธิ์กู้เงินจำนวนนั้นทันที (สร้าง loan ให้ user นั้น)
- ปุ่มจะถูกปิดใช้งานทันทีเมื่อมีผู้รับสิทธิ์แล้ว
- ระบบจะแจ้งเตือนทั้งผู้ได้สิทธิ์และแอดมิน

**ตัวอย่าง:**
> แอดมิน: `!ปล่อยกู้ 500`
> SharkBot: "ปล่อยกู้ด่วน! 500 เครดิต คนแรกที่กดจะได้สิทธิ์ทันที!" [ขอกู้เงิน]
> @user1 กดปุ่ม → ได้รับสิทธิ์กู้ 500 เครดิต (loan_id: xxxx)
> แอดมินได้รับแจ้งเตือนใน DM


- เมื่อมีการใช้ `!เบิก [จำนวน]` ระบบจะส่งข้อความบันทึกธุรกรรม (pending) พร้อม **ปุ่ม** ให้แอดมินเลือก:
    - [✅ อนุมัติ] (Approve)
    - [❌ ปฏิเสธ] (Reject)
- เมื่อแอดมินกดปุ่ม:
    - ระบบจะอัปเดตสถานะในฐานข้อมูล (approved/rejected)
    - แจ้งผลในแชแนลทันที
    - ทุกธุรกรรมจะถูกบันทึกลงประวัติ สามารถดูย้อนหลังได้ด้วย `!ประวัติ`
- หากมีการกดปุ่ม "ขอชำระหนี้" ระบบจะบันทึกการขอชำระหนี้และรอแอดมินกดยืนยัน
- แอดมินสามารถกด "อนุมัติชำระหนี้" เพื่อยืนยันการชำระหนี้
- ระบบจะบันทึกการชำระหนี้และอัปเดตสถานะหนี้เป็น "ปิด" ทันที
- ทุกการกู้ยืมและชำระหนี้จะถูกบันทึกในประวัติธุรกรรม สามารถดูได้ด้วยคำสั่ง `/ธุรกรรม` หรือ `!ธุรกรรม`
- ระบบจะคำนวณดอกเบี้ยอัตโนมัติทุกชั่วโมง โดยคิด 10% ของยอดหนี้คงเหลือ
- หาก user มีหนี้ค้าง จะไม่สามารถกดปุ่มขอกู้ในรอบถัดไปได้ จนกว่าจะชำระหนี้ทั้งหมด
- แอดมินสามารถประกาศปล่อยกู้ได้ด้วยคำสั่ง `/ประกาศปล่อยกู้ <จำนวน>` ซึ่งจะแจ้งเตือนผู้ใช้ในแชทและสร้างปุ่มให้กดขอกู้
- ระบบจะบันทึกทุกการกู้ยืมและชำระหนี้ในฐานข้อมูล สามารถดูประวัติย้อนหลังได้
- หากมีการกู้ยืมใหม่ ระบบจะสร้าง loan ใหม่ให้ user นั้น
- หากมีการชำระหนี้ ระบบจะอัปเดตสถานะหนี้เป็น "ปิด" และบันทึกประวัติการชำระหนี้
- ระบบจะไม่อนุญาตให้ user กดขอกู้ซ้ำหากยังมีหนี้ค้างอยู่
- แอดมินสามารถดูประวัติการกู้ยืมและชำระหนี้ของทุก user ได้ด้วยคำสั่ง `/ธุรกรรม` หรือ `!ธุรกรรม`
- ระบบจะบันทึกทุกการกู้ยืมและชำระหนี้ในฐานข้อมูล สามารถดูประวัติย้อนหลังได้
- หากมีการกดปุ่ม "ขอชำระหนี้" ระบบจะบันทึกการขอชำระหนี้และรอแอดมินกดยืนยัน
- แอดมินสามารถกด "อนุมัติชำระหนี้" เพื่อยืนยันการชำระหนี้
- ระบบจะบันทึกการชำระหนี้และอัปเดตสถานะหนี้เป็น "ปิด" ทันที
- ทุกการกู้ยืมและชำระหนี้จะถูกบันทึกในประวัติธุรกรรม สามารถดูได้ด้วยคำสั่ง `/ธุรกรรม` หรือ `!ธุรกรรม`
>บอท/AI จะตอบ DM แค่ ADMIN เท่านั้น
 